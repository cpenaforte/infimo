!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Infimo",[],t):"object"==typeof exports?exports.Infimo=t():e.Infimo=t()}(self,()=>(()=>{var __webpack_modules__={"./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(/*! ./subclasses/NameRegister */"./src/subclasses/NameRegister.ts")),i=s(r(/*! ./subclasses/Ref */"./src/subclasses/Ref.ts")),o=s(r(/*! ./subclasses/VirtualMachine */"./src/subclasses/VirtualMachine.ts"));t.default=class{appId;template;listeners;refs;namesRegister;constructor(e){this.template=e.template,this.listeners={},this.refs=[],this.namesRegister=new n.default,this.data(e.data||{}),this.watch(e.watch||{}),this.methods(e.methods||{})}notifyListeners(e,t,r){this.listeners[e]&&this.listeners[e].forEach(e=>e(t,r)),this.appId&&this.build(this.appId)}dataParse(e){const[r,t]=e;e=this.namesRegister.registerName(r,"data");const s=new i.default(e,t);this.refs.push(s),Object.defineProperties(this,{[r]:{get:()=>s.getValue(),set:e=>{var t=s.getValue();s.updateValue(e),this.notifyListeners(r,e,t)}}})}data(e){Object.entries(e).forEach(e=>this.dataParse(e))}watchParse(e){var[e,t]=e;if(!this.namesRegister.nameExist(e))throw new Error(`Name ${e} does not exist`);this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}watch(e){Object.entries(e).forEach(e=>this.watchParse(e))}methodsParse(e){const[t,r]=e,s=this;e=this.namesRegister.registerName(t,"methods");const n=new i.default(e,(...e)=>r.call(s,...e));this.refs.push(n),Object.defineProperty(this,t,{get:()=>n.getValue()})}methods(e){Object.entries(e).forEach(e=>this.methodsParse(e))}parseTemplate(){var e=""+this.template;const t=new o.default;return t.initThis(this),e.replace(/{{(.*?)}}/g,e=>{return""+t.runScriptSync(e)}).replace(/{{/g,"").replace(/}}/g,"")}build(e){this.appId=e;var e=this.parseTemplate(),t=document.createElement("div"),e=(t.innerHTML=e,t.firstElementChild);e&&document.querySelector(this.appId)?.appendChild(e)}}},"./src/subclasses/NameRegister.ts":
/*!****************************************!*\
  !*** ./src/subclasses/NameRegister.ts ***!
  \****************************************/(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{names;constructor(){this.names=[]}registerName(e,t){if(this.nameExist(e))throw new Error(`Name ${e} already exists`);e={name:e,type:t};return this.names.push(e),e}registerNames(e){var t=e.find(e=>this.nameExist(e.name))?.name;if(t)throw new Error(`Name ${t} already exists`);this.names.push(...e)}nameExist(t){return this.names.some(e=>e.name===t)}getNames(){return this.names}}},"./src/subclasses/Ref.ts":
/*!*******************************!*\
  !*** ./src/subclasses/Ref.ts ***!
  \*******************************/(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{name;value;constructor(e,t){this.name=e,this.value=t}updateValue(e){this.value=e}getName(){return this.name}getValue(){return this.value}}},"./src/subclasses/VirtualMachine.ts":
/*!******************************************!*\
  !*** ./src/subclasses/VirtualMachine.ts ***!
  \******************************************/function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(/*! vm */"./node_modules/vm-browserify/index.js"));t.default=class{context;constructor(){this.context={}}initThis(e){e=Object.getOwnPropertyDescriptors(e),e=Object.entries(e).map(([e,t])=>{t=t.get?t.get():t.value;return console.log(t),[e,t]});this.context=Object.fromEntries(e)}runScriptSync(e){let t=null;try{t=new n.default.Script(e).runInNewContext(this.context)}catch(e){console.error(e)}finally{return t}}}},"./node_modules/vm-browserify/index.js":
/*!*********************************************!*\
  !*** ./node_modules/vm-browserify/index.js ***!
  \*********************************************/(__unused_webpack_module,exports)=>{var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t,r=[];for(t in e)r.push(t);return r},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(t){var e,r,s,n,i;if(t instanceof Context)return(e=document.createElement("iframe")).style||(e.style={}),e.style.display="none",document.body.appendChild(e),s=(r=e.contentWindow).eval,i=r.execScript,!s&&i&&(i.call(r,"null"),s=r.eval),forEach(Object_keys(t),function(e){r[e]=t[e]}),forEach(globals,function(e){t[e]&&(r[e]=t[e])}),n=Object_keys(r),i=s.call(r,this.code),forEach(Object_keys(r),function(e){(e in t||-1===indexOf(n,e))&&(t[e]=r[e])}),forEach(globals,function(e){e in t||defineProp(t,e,r[e])}),document.body.removeChild(e),i;throw new TypeError("needs a 'context' argument.")},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var r=Script.createContext(t),e=this.runInContext(r);return t&&forEach(Object_keys(r),function(e){t[e]=r[e]}),e},forEach(Object_keys(Script.prototype),function(r){exports[r]=Script[r]=function(e){var t=Script(e);return t[r].apply(t,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(t){var r=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(e){r[e]=t[e]}),r}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];return void 0!==t||(t=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__)),t.exports}var __webpack_exports__=__webpack_require__("./src/main.ts");return __webpack_exports__})());
//# sourceMappingURL=infimo.min.js.map