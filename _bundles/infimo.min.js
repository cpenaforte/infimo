!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Infimo",[],t):"object"==typeof exports?exports.Infimo=t():e.Infimo=t()}(self,()=>(()=>{"use strict";var s={"./src/subclasses/NameRegister.ts":
/*!****************************************!*\
  !*** ./src/subclasses/NameRegister.ts ***!
  \****************************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{names;constructor(){this.names=[]}registerName(e,t){if(this.nameExist(e))throw new Error(`Name ${e} already exists`);e={name:e,type:t};return this.names.push(e),e}registerNames(e){var t=e.find(e=>this.nameExist(e.name))?.name;if(t)throw new Error(`Name ${t} already exists`);this.names.push(...e)}nameExist(t){return this.names.some(e=>e.name===t)}getNames(){return this.names}}},"./src/subclasses/Ref.ts":
/*!*******************************!*\
  !*** ./src/subclasses/Ref.ts ***!
  \*******************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{name;value;constructor(e,t){this.name=e,this.value=t}updateValue(e){this.value=e}getName(){return this.name}getValue(){return this.value}}},"./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.basicParamParse=void 0;a.basicParamParse=(t,s)=>{var e=s.find(e=>e.getName().name===t);return e?e.getValue():Number.isNaN(Number(t))?"true"===t||"false"===t?"true"===t:t.startsWith("'")&&t.endsWith("'")?t.replace(/'/g,""):t.startsWith('"')&&t.endsWith('"')?t.replace(/"/g,""):"undefined"!==t?"null"===t?null:"NaN"===t?NaN:t.includes("[")&&t.includes("]")?t.replace("[","").replace("]","").split(",").map(e=>{e=e.trim();return(0,a.basicParamParse)(e,s)}):t.includes("{")&&t.includes("}")?t.replace("{","").replace("}","").split(",").map(e=>{var[e,t]=e.split(":").map(e=>e.trim());return{[e]:(0,a.basicParamParse)(t,s)}}):t:void 0:Number(t)}}},a={};function r(e){var t=a[e];return void 0!==t||(t=a[e]={exports:{}},s[e](t,t.exports,r)),t.exports}var e={};{var t=e;
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/Object.defineProperty(t,"__esModule",{value:!0});const i=r(/*! ./subclasses/NameRegister */"./src/subclasses/NameRegister.ts"),n=r(/*! ./subclasses/Ref */"./src/subclasses/Ref.ts"),l=r(/*! ./utils */"./src/utils.ts");t.default=class{appId;template;listeners;refs;namesRegister;constructor(e){this.template=e.template,this.listeners={},this.refs=[],this.namesRegister=new i.default,this.data(e.data||{}),this.watch(e.watch||{}),this.methods(e.methods||{})}notifyListeners(e,t,s){this.listeners[e]&&this.listeners[e].forEach(e=>e(t,s)),this.appId&&this.build(this.appId)}dataParse(e){const[s,t]=e;e=this.namesRegister.registerName(s,"data");const a=new n.default(e,t);this.refs.push(a),Object.defineProperties(this,{[s]:{get:()=>a.getValue(),set:e=>{var t=a.getValue();a.updateValue(e),this.notifyListeners(s,e,t)}}})}data(e){Object.entries(e).forEach(e=>this.dataParse(e))}watchParse(e){var[e,t]=e;if(!this.namesRegister.nameExist(e))throw new Error(`Name ${e} does not exist`);this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}watch(e){Object.entries(e).forEach(e=>this.watchParse(e))}methodsParse(e){var[e,t]=e,s=this.namesRegister.registerName(e,"methods"),s=new n.default(s,t);this.refs.push(s),Object.defineProperty(this,e,s.getValue())}methods(e){Object.entries(e).forEach(e=>this.methodsParse(e))}parseTemplate(){return(""+this.template).replace(/{{(.*?)}}/g,e=>{let a=e;return this.refs.forEach(t=>{var e,s;a.includes(t.getName().name)&&(a="function"==typeof t.getValue()?(e=new RegExp(t.getName().name+"\\((.*?)\\)","g"),s=(a.match(e)||[]).map(e=>{return e.replace(t.getName().name+"(","").replace(")","").split(",").map(e=>e.trim()).map(e=>(0,l.basicParamParse)(e,this.refs))}),a.replace(e,t.getValue()(...s))):a.replace(""+t.getName().name,t.getValue()))}),a}).replace(/{{/g,"").replace(/}}/g,"")}build(e){this.appId=e;var e=this.parseTemplate(),t=document.createElement("div"),e=(t.innerHTML=e,t.firstElementChild);e&&document.querySelector(this.appId)?.appendChild(e)}}}return e})());
//# sourceMappingURL=infimo.min.js.map